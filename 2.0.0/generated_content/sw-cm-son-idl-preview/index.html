
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.2">
    
    
      
        <title>Index - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d451bc0e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a5377069.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto Mono";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/import-styles.css">
    
      <link rel="stylesheet" href="../../stylesheets/patch.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="sonardyne_light" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#services" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../../assets/SonardyneLogoWhite.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="sonardyne_light" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="sonardyne_dark" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Sonardyne/son-idl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    sonardyne/son-idl
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Sonardyne API

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../message-reference/" class="md-tabs__link">
        
  
    
  
  Message Reference

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../vehicle-guides/" class="md-tabs__link">
        
  
    
  
  Vehicle Guides

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../networking/" class="md-tabs__link">
        
  
    
  
  Networking

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../licence/" class="md-tabs__link">
        
  
    
  
  Licence

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../../assets/SonardyneLogoWhite.svg" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Sonardyne/son-idl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    sonardyne/son-idl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Sonardyne API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Sonardyne API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference-and-examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protobuf Reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Examples
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../versioning-and-compatibility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Versioning & Compatibility
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../message-reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Message Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../vehicle-guides/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vehicle Guides
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../licence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Licence
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Index</h1>

<div><h2 id="services">Services</h2>
<p>The API provides services which all follow a regular pattern.</p>
<table>
<thead>
<tr>
<th>Service</th>
<th>Sends and receives</th>
<th>Envelope contains</th>
<th>What is this for?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ConfigurationService</code></td>
<td><code>ConfigurationEnvelope</code></td>
<td><code>[name]Configuration</code></td>
<td>Set/Get e.g. set lever arms</td>
</tr>
<tr>
<td><code>CommandService</code></td>
<td><code>CommandEnvelope</code></td>
<td><code>[name]Command</code></td>
<td>Run Task e.g. reset INS</td>
</tr>
<tr>
<td><code>ObservationService</code></td>
<td><code>ObservationEnvelope</code></td>
<td><code>[name]Observation</code></td>
<td>In/Out stream of data e.g. GNSS received</td>
</tr>
<tr>
<td><code>CommsService</code></td>
<td><code>CommsEnvelope</code></td>
<td><code>[name]Comms</code></td>
<td>In/Out stream of comms data e.g. write to serial</td>
</tr>
</tbody>
</table>
<h3 id="configuration-service">Configuration Service</h3>
<p>The configuration service is used for setting and getting configurations.
For each configuration sent in an envelope, we can expect the same configuration types
returned in the same order. Configurations contain a result to signify the success
of the configuration application.</p>
<p>The configuration service provides a <code>ConfigurationStream</code>, which outputs any configurations
which change. Listening on the <code>ConfigurationStream</code> is an efficient way to track the entire
state of the product you are connected to.</p>
<p>Typically, all fields in a configuration are <code>optional</code>. This allows the application of 
partial configurations. </p>
<h3 id="command-service">Command Service</h3>
<p>The command service is for command and control. Whereas the configuration
service is used to configure the state of a product (typically at startup), the command service
is used to perform actions (typically throughout runtime) such as algorithm resets, triggering acoustics
or commanding the system to shut down.</p>
<h3 id="observation-service">Observation Service</h3>
<p>The observation service provides a bidirectional stream, allowing us to send and listen to observations. An
observation is a piece of structured data e.g. a GNSS observation containing latitude and longitude fields, 
unlike <em>comms</em> which is unstructured data, containing a variable number of raw bytes.</p>
<p>Example use cases for the observation services are streaming data from a pressure sensor, streaming
GNSS readings from a GNSS source, and streaming navigation solutions from a navigation module.</p>
<p>For information on subscribing to observation streams, see <a href="#subscribing-to-streams">Subscribing to Streams</a>.</p>
<h3 id="comms-service">Comms Service</h3>
<p>The comms service allows bidirectional communication with data ports e.g. ethernet ports and serial ports.
This allows monitoring of incoming and outgoing data over a port, or the sending of data out over a port.</p>
<p>An example comms message as JSON:
</p><div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w"> </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.services.comms_service.CommsEnvelope"</span><span class="p">,</span>
<span class="w"> </span><span class="nt">"comms_messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.common.ports.DataPortComms"</span><span class="p">,</span>
<span class="w">   </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1518954244"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TCP-8110"</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"common_time_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mf">1765206239.1132329</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"instrument_time_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mf">251542.067792193</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">"data_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATA_DIRECTION_OUTPUT"</span><span class="p">,</span>
<span class="w">   </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SGVsbG8gV29ybGQhIDUw"</span>
<span class="w">  </span><span class="p">}</span>
<span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<em>A <code>CommsEnvelope</code> containing a <code>DataPortComms</code> message with bytes to output over a TCP port named TCP-8110. 
Note that although these bytes are not human-readable in the serialised JSON, they do deserialise to a human-readable string.</em>
<h2 id="message-types">Message Types</h2>
<p>The API makes use of message suffixes which give information on how a message may be used.</p>
<ul>
<li>There are messages which represent a <a href="#component-messages">component</a> of the device.</li>
<li>There are messages which represent a <a href="#reference-messages">reference</a> to a component.</li>
<li>There are <a href="#common-messages">common messages</a> which represent commonly used concepts (e.g. ethernet ports) and have no required suffix.</li>
</ul>
<h3 id="component-messages">Component Messages</h3>
<p>A product can be considered as a collection of <em>components</em>. These components are
<em>modules, algorithms, sources,</em> and <em>port lists.</em></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Message name must be</th>
<th>Can be combined with service names e.g.</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Module</code></td>
<td><code>[name]Module</code></td>
<td><code>[name]ModuleConfiguration</code></td>
</tr>
<tr>
<td><code>Algorithm</code></td>
<td><code>[name]Algorithm</code></td>
<td><code>[name]AlgorithmCommand</code></td>
</tr>
<tr>
<td><code>Source</code></td>
<td><code>[name]Source</code></td>
<td><code>[name]SourceObservation</code></td>
</tr>
<tr>
<td><code>Sensor</code></td>
<td><code>[name]Sensor</code></td>
<td><code>[name]SensorObservation</code></td>
</tr>
<tr>
<td><code>Port List</code></td>
<td><code>[name]PortList</code></td>
<td><code>[name]PortListComms</code></td>
</tr>
</tbody>
</table>
<h4 id="modules">Modules</h4>
<p>The <em><strong>Module</strong></em> component represents non-algorithm, non-sensor, non-data source components e.g. a <code>BatteryModule</code> is responsible for managing a battery and enabling/disabling charging. Another example module is the <code>NetworkModule</code>.</p>
<ul>
<li><code>BatteryModule</code> Allows battery management e.g. enabling charging.</li>
<li><code>DeviceInstallationModule</code> Allows configuration of the device's lever arms &amp; mounting angles relative to the vessel.</li>
<li><code>DeviceModule</code> Allows reading of product name and serial number as well as sending of shutdown &amp; factory reset commands.</li>
<li><code>ExternalLoggingModule</code> Allows configuration of logging to an external client via a TCP server.</li>
<li><code>NavigationModule</code> Allows streaming of navigation solutions, in SPRINT this is the combined result of the AHRS &amp; INS algorithm.</li>
<li><code>NetworkModule</code> Allows configuration of the device's network interface e.g. changing the device IP address.</li>
<li><code>OutputMessageModule</code> Allows configuration of output messages over data ports e.g. outputting GGA messages on a serial port.</li>
<li><code>PortLinkModule</code> Allows bidirectional routing between a serial and ethernet port.</li>
<li><code>RemotePointsModule</code> Allows configuration of remote points on the vessel, the navigation module can output data valid at these remote points.</li>
<li><code>SprintModule</code> Allows reading of SPRINT-specific device information.</li>
<li><code>TimeModule</code> Allows selection of time input sources in order to set UTC and instrument time.</li>
</ul>
<p>An example request and response sent as JSON:
</p><div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.common.envelope.RequestEnvelope"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"requests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.services.configuration_service.SetConfigurationRequest"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.modules.battery_module.BatteryModuleConfiguration"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"isBatteryChargingEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<em>A request to disable battery charging.</em>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w"> </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.common.envelope.ResponseEnvelope"</span><span class="p">,</span>
<span class="w"> </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w"> </span><span class="nt">"responses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.services.configuration_service.SetConfigurationResponse"</span><span class="p">,</span>
<span class="w">   </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"common_time_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mf">1765193736.1050346</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"instrument_time_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mf">239039.059659313</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.modules.battery_module.BatteryModuleConfiguration"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2388163018"</span><span class="p">,</span>
<span class="w">     </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Output Message Module"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"is_battery_charging_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OUTCOME_SUCCESS"</span>
<span class="w">   </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<em>The response to the battery module configuration request.</em>
<h4 id="algorithms">Algorithms</h4>
<p>The <em><strong>Algorithm</strong></em> component represents internal algorithms e.g. an INS algorithm.</p>
<ul>
<li><code>AhrsAlgorithm</code> Allows sending of reset commands and configuring AHRS coarse latitude and longitude.</li>
<li><code>InsAlgorithm</code> Allows sending of reset commands and configuring INS aiding.</li>
<li><code>DvlAlgorithm</code> Allows configuration of DVL algorithm settings e.g. max ping rate &amp; trigger inputs.</li>
</ul>
<p>An example request and response sent as JSON:
</p><div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.common.envelope.RequestEnvelope"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"requests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.services.configuration_service.SetConfigurationRequest"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.algorithms.ins_algorithm.InsAlgorithmConfiguration"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"isGnssEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"isXposEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<em>A request to enable GNSS aiding to the INS, and to disable XPOS aiding.</em>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w"> </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.common.envelope.ResponseEnvelope"</span><span class="p">,</span>
<span class="w"> </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w"> </span><span class="nt">"responses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.services.configuration_service.SetConfigurationResponse"</span><span class="p">,</span>
<span class="w">   </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"common_time_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mf">1765193984.8364909</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"instrument_time_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mf">239287.79105141</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.algorithms.ins_algorithm.InsAlgorithmConfiguration"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3646079212"</span><span class="p">,</span>
<span class="w">     </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INS Algorithm"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"is_gnss_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"is_susbl_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"is_xpos_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OUTCOME_SUCCESS"</span>
<span class="w">   </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<em>The response to the INS algorithm configuration request. Note that other aiding sources (SUSBL, in this case) are left unchanged.</em>
<h4 id="sources">Sources</h4>
<p>The <em><strong>Source</strong></em> component represents "aiding" or "input" sources e.g. GNSS or Time.
These sources typically have configurable lever arms. The SPRINT Nav has a pressure sensor and a depth source. 
The depth source selects either a data port (receiving depth messages e.g. PSONPD) 
or a built-in pressure sensor for use as the source of depth.</p>
<ul>
<li><code>DepthSource</code> Allows configuration of a data port or pressure sensor for deriving depth.</li>
<li><code>GnssSource</code> Allows configuration of a data port for a GNSS input (receiving GGA &amp; GST messages).</li>
<li><code>SoundVelocitySource</code> Allows configuration of a manual value, data port, or derived sound velocity.</li>
<li><code>SusblSource</code> Allows configuration of a data port for an SUSBL input (receiving PSIMSSB messages).</li>
<li><code>NtpTimeSource</code> Allows configuration of a connection to an NTP server.</li>
<li><code>ZdaTimeSource</code> Allows configuration of a data port for a ZDA input (receiving ZDA messages).</li>
<li><code>PpsTimeSource</code> Allows configuration of a trigger port for a 1-pulse-per-second time input.</li>
<li><code>XposSource</code> Allows configuration of a data port for an XPOS input (receiving XPOS messages).</li>
</ul>
<p>Many of the sources support observation streaming, which allows the monitoring of data received by these sources 
e.g. a <code>GnssSourceObservation</code>.</p>
<p>Sources typically have lever arms, and may have mounting angles, which relate their position to the Vessel's common reference point.</p>
<h4 id="sensors">Sensors</h4>
<p>The <em><strong>Sensor</strong></em> component represents physical devices which observe data. The observation stream can be
used to monitor these observations. Example sensors are depth, temperature - these can be configured
using the Configuration Service.</p>
<ul>
<li><code>DvlSensor</code> Represents a doppler velocity log (DVL) on the device.</li>
<li><code>PressureSensor</code> Represents a pressure sensor on the device.</li>
<li><code>TemperatureSensor</code> Represents a temperature sensor on the device.</li>
</ul>
<h4 id="port-lists">Port Lists</h4>
<p>The <em><strong>Port List</strong></em> component represents collections of data inputs/outputs. 
Some port lists, e.g. ethernet port lists, can have entries added and removed. 
Other port lists, e.g. serial port lists, represent physical ports on the device and are fixed length.
On a data port such as a <code>SerialPort</code> or an <code>EthernetPort</code>, it is possible to send and receive bytes using the <code>CommsService</code>.</p>
<ul>
<li><code>EthernetPortList</code> Allows adding, removing &amp; configuring of TCP &amp; UDP ports, these may be used as inputs to supported <em>sources</em>, 
and can be set as outputs in the <em>output message module</em>.</li>
<li><code>ExternalControlPortList</code> Represents external control ports on the device, these may be used as inputs to supported <em>sources</em>.</li>
<li><code>PowerPassPortList</code> Allows management of power pass ports (e.g. enabling/disabling).</li>
<li><code>SerialPortList</code> Allows management of serial ports (e.g. setting baud rate), these may be used as inputs to supported <em>sources</em>,
  and can be set as outputs in the <em>output message module</em>.</li>
<li><code>TriggerPortList</code> Allows management of trigger ports.</li>
</ul>
<h3 id="common-messages">Common Messages</h3>
<p>Unlike the component messages, the common messages have no required suffixes. 
Common messages may only contain other common messages, whereas <em>component</em> messages
may contain other component messages <em>and</em> common messages.</p>
<p>Common messages include <code>LeverArms</code>, <code>MountingAngles</code>, <code>EthernetPort</code>, <code>SerialPort</code>, and more.
Common messages also include the <code>RequestEnvelope</code> and <code>ResponseEnvelope</code> - to see how these are used,
see <a href="#using-non-grpc-modes">Using Non-gRPC Modes</a>.</p>
<h3 id="additional-message-types">Additional Message Types</h3>
<h4 id="reference-messages">Reference Messages</h4>
<p>Messages ending in the word <em>"Reference"</em> allow one message to point to another.
Note that these references are read-only.
</p><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sonardyne_api</span> <span class="k">as</span> <span class="nn">son</span>
<span class="k">with</span> <span class="n">son</span><span class="o">.</span><span class="n">WrapperGrpc</span><span class="p">(</span><span class="s1">'0.0.0.0'</span><span class="p">,</span> <span class="mi">8103</span><span class="p">)</span> <span class="k">as</span> <span class="n">wrapper</span><span class="p">:</span>  <span class="c1"># Device IP address &amp; gRPC port:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">set_configuration</span><span class="p">(</span><span class="n">son</span><span class="o">.</span><span class="n">GnssSourceConfiguration</span><span class="p">(</span><span class="n">input_data_port</span><span class="o">=</span><span class="n">son</span><span class="o">.</span><span class="n">DataPortReference</span><span class="p">(</span><span class="n">set_uid</span><span class="o">=</span><span class="n">son</span><span class="o">.</span><span class="n">UniqueID</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"TCP-5000"</span><span class="p">))))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>
In this example, the <em>input_data_port</em> of a GNSS source is set using a <code>DataPortReference</code>.
the <code>DataPortReference</code> references a data port - an ethernet, serial, or external control port.
The <code>DataPortReference</code> can be set using <code>set_uid</code>, which allows us to refer to other configuration by
unique ID value or by name.
<p></p><div class="highlight"><pre><span></span><code><span class="n">son</span><span class="o">.</span><span class="n">DataPortReference</span><span class="p">(</span><span class="n">set_uid</span><span class="o">=</span><span class="n">son</span><span class="o">.</span><span class="n">UniqueID</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"TCP-5000"</span><span class="p">))</span>
<span class="n">son</span><span class="o">.</span><span class="n">DataPortReference</span><span class="p">(</span><span class="n">set_uid</span><span class="o">=</span><span class="n">son</span><span class="o">.</span><span class="n">UniqueID</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3245395109</span><span class="p">))</span>
</code></pre></div>
The data port reference has "set" fields which are used to reference to a particular data port.
<div class="highlight"><pre><span></span><code><span class="n">son</span><span class="o">.</span><span class="n">DataPortReference</span><span class="p">(</span><span class="n">set_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
The <code>set_none</code> field may be used to clear the reference.
<div class="highlight"><pre><span></span><code><span class="n">son</span><span class="o">.</span><span class="n">DataPortReference</span><span class="p">(</span><span class="n">set_any_ethernet_port</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">son</span><span class="o">.</span><span class="n">DataPortReference</span><span class="p">(</span><span class="n">set_any_external_control_port</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">son</span><span class="o">.</span><span class="n">DataPortReference</span><span class="p">(</span><span class="n">set_any_serial_port</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
The data port reference also has <code>set_any</code> fields, these allow data port references
to be set when no unique ID values are known.
<p>Below is an example of a <code>DataPortReference</code> being set:
</p><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sonardyne_api</span> <span class="k">as</span> <span class="nn">son</span>
<span class="k">with</span> <span class="n">son</span><span class="o">.</span><span class="n">WrapperJsonTcp</span><span class="p">(</span><span class="s1">'0.0.0.0'</span><span class="p">,</span> <span class="mi">8111</span><span class="p">)</span> <span class="k">as</span> <span class="n">wrapper</span><span class="p">:</span>  <span class="c1"># Device IP address &amp; gRPC port:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">wrapper</span><span class="o">.</span><span class="n">set_configuration</span><span class="p">(</span><span class="n">son</span><span class="o">.</span><span class="n">GnssSourceConfiguration</span><span class="p">(</span><span class="n">input_data_port</span><span class="o">=</span><span class="n">son</span><span class="o">.</span><span class="n">DataPortReference</span><span class="p">(</span><span class="n">set_uid</span><span class="o">=</span><span class="n">son</span><span class="o">.</span><span class="n">UniqueID</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"TCP-5000"</span><span class="p">)))))</span>
</code></pre></div>
When using the JSON interface over a TCP server (in this example on port 8111) 
the following message contents can be observed; these can be seen by using
the 'Comms Viewer' functionality in the SPRINT-Nav UI.
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.common.envelope.RequestEnvelope"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"requests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.services.configuration_service.SetConfigurationRequest"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.sources.gnss_source.GnssSourceConfiguration"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"inputDataPort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"setUid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TCP-5000"</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
This is the JSON message sent by the running the example, with the partially populated <em>inputDataPort</em> field.
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w"> </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.common.envelope.ResponseEnvelope"</span><span class="p">,</span>
<span class="w"> </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w"> </span><span class="nt">"responses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.services.configuration_service.SetConfigurationResponse"</span><span class="p">,</span>
<span class="w">   </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"common_time_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mf">1764954922.1296844</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"instrument_time_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mf">225.084287999</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type.googleapis.com/sonardyne.api.sources.gnss_source.GnssSourceConfiguration"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"887217899"</span><span class="p">,</span>
<span class="w">     </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GNSS Source"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"input_data_port"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">"readonly_uid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3245395109"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TCP-5000"</span>
<span class="w">     </span><span class="p">},</span>
<span class="w">     </span><span class="nt">"readonly_ethernet_port_reference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3245395109"</span><span class="p">,</span>
<span class="w">       </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TCP-5000"</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"source_port"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"data_encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATA_ENCODING_NONE"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"tcp_server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="nt">"maximum_connections"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"lever_arms"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">"fallback_horizontal_uncertainty_metres"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"scale_uncertainty"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"gnss_depth_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GNSS_DEPTH_MODE_ELLIPSOIDAL"</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OUTCOME_SUCCESS"</span>
<span class="w">   </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
This is the received message, with the fully populated <em>inputDataPort</em> (with <em>input_data_port</em> and
<em>readonly_ethernet_port_reference</em> fields).
<p>The data port reference has "set" fields, and "readonly" fields.
The readonly fields are populated when a data port reference is returned from the device.</p>
<h2 id="using-non-grpc-modes">Using Non-gRPC Modes</h2>
<p>The API may be used without gRPC by sending proto messages as either JSON or Framed binary messages. 
Framed messages are serialised Protobuf messages wrapped in a Sonardyne Simple Binary Message and
<a href="https://en.wikipedia.org/wiki/Consistent_Overhead_Byte_Stuffing">COBS</a> encoded.</p>
<p>In non-gRPC modes, only message types ending in <em>"Envelope"</em> can be sent over the API. For example,
a <code>RequestEnvelope</code> can be sent as JSON and a corresponding <code>ResponseEnvelope</code> will be returned.
These envelopes can be matched by setting the UID on the <code>RequestEnvelope</code>.</p>
<p>A <code>RequestEnvelope</code> can contain any number of messages ending in <em>"Request"</em> 
e.g. <code>SetConfigurationRequest</code> or <code>SendCommandRequest</code>, 
and the returned <code>ResponseEnvelope</code> will match one to one with responses e.g. (<code>SetConfigurationResponse</code> or <code>SendCommandResponse</code>).</p>
<p>When streaming data in or out over non-gRPC modes, the <code>ObservationEnvelope</code> is used. When subscribing
to changing configurations, the <code>ConfigurationEnvelopes</code> is used. For more information on subscribing
to streams, see <a href="#subscribing-to-streams">Subscribing to Streams</a>.</p>
<h2 id="subscribing-to-streams">Subscribing to Streams</h2>
<p>Several services allow data streaming, these are:</p>
<ul>
<li><code>ObservationStream</code> (on the <code>ObservationService</code>). <em>Allows the monitoring of outputs from components e.g.
streaming out readings from a <code>PressureSensor</code> or <code>GnssSource</code>. Data can also be streamed into these components e.g.
streaming <code>GnssSourceObservations</code> into a <code>GnssSource</code>.</em></li>
<li><code>CommsStream</code> (on the <code>CommsService</code>). <em>Allows the monitoring of data being sent and received over serial and ethernet,
also allows data to be sent out over these ports.</em></li>
<li><code>ConfigurationStream</code> (on the <code>ConfigurationService</code>). <em>Allows the monitoring changing configurations.</em></li>
</ul>
<p>Messages ending in <em>"SubscriptionRequest"</em> (e.g. <code>CommsSubscriptionRequest</code>) allow the setting of
matching and rejection criteria based on message typenames and UniqueIDs.</p>
<p>For example, possible subscriptions include:</p>
<ul>
<li>All messages with a specified suffix e.g. <em>"SensorObservation"</em>.</li>
<li>All messages excluding a specified suffix e.g. <em>"Observation"</em> messages excluding <em>"SourceObservation"</em>.</li>
<li>All messages matching a specified unique ID name e.g. "GNSS Source.</li>
<li>All messages matching a specified unique ID value e.g. 19572865462 (supposing this is the UID of a particular component).</li>
</ul>
<p>Streams can be subscribed to by sending a <em>"SubscriptionRequest"</em> message. For example, an <code>ObservationSubscriptionRequest</code>
can be sent to the <code>ObservationStream</code> on the <a href="#observation-service">observation service</a> to listen to pressure sensor readings.</p>
<p>The <code>ConfigurationSubscriptionRequest</code> may be used to monitor changing configurations.</p>
<p>The <code>CommsSubscriptionRequest</code> may be used to monitor incoming and outgoing data over a port (serial or ethernet).
The <code>CommsEnvelope</code> allows the sending of data out over a port, and must contain messages ending in <em>"Comms"</em> e.g.
<code>DataPortComms</code>.</p></div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026 Sonardyne International Ltd  <a href="#__consent">Change cookie settings</a>

    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Sonardyne" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/user/sonardyne" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.x.com/sonardyne" target="_blank" rel="noopener" title="www.x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/Sonardyne" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/sonardyne-international-ltd/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.footer", "toc.follow", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.726fbb30.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>